<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>관절연구소</title>
    <link rel="stylesheet" href="style.css">

    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec3 vPosition;
        attribute vec3 vNormal;
        attribute vec2 vTexCoord;
        attribute vec3 vColor;

        uniform mat4 uWorld;
        uniform mat4 uView;
        uniform mat4 uProjection;

        varying vec3 fNormal;
        varying vec3 fPosition;
        varying vec2 fTexCoord;
        varying vec3 fColor;

        void main() {
            vec4 worldPosition = uWorld * vec4(vPosition, 1.0);
            fPosition = worldPosition.xyz;
            fNormal = mat3(uWorld) * vNormal;
            fTexCoord = vTexCoord;
            fColor = vColor;
            gl_Position = uProjection * uView * worldPosition;
            gl_PointSize = 10.0;
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;

        varying vec3 fNormal;
        varying vec3 fPosition;
        varying vec2 fTexCoord;
        varying vec3 fColor;

        uniform vec3 uLightDirection;
        uniform vec4 uDiffuse;
        uniform vec3 uAmbient;

        void main() {
            vec3 normal = normalize(fNormal);
            float light = dot(normal, normalize(uLightDirection));
            light = max(light, 0.0);

            vec3 diffuseTerm = light * uDiffuse.rgb;
            vec3 ambientTerm = uAmbient;
            vec3 lit = diffuseTerm + ambientTerm;

            vec3 color = fColor * lit;
      
            gl_FragColor = vec4(color, uDiffuse.a);
        }
    </script>

    <script type="text/javascript" src="common/webgl-utils.js"></script>
    <script type="text/javascript" src="common/initShaders.js"></script>
    <script type="text/javascript" src="common/m4.js"></script>
    <script type="module" src="main.js"></script>
</head>

<body>
    <div id="container">
        <canvas height="1024" id="gl-canvas" width="1024"></canvas>
        <div id="model">
            <div><strong>Spider</strong></div>
            <hr>
            Transform:<br>
            x: <span id="posX">0</span><br>
            y: <span id="posY">0</span><br>
            z: <span id="posZ">0</span><br>
            yaw: <span id="yaw">0</span>°<br>
            <hr>
            Spider Height: <span id="groundHeightValue">0.5</span><br>
            <input type="range" id="groundHeightSlider" min="0" max="0.7" step="0.1" value="0.5">
        </div>
        <div id="controller">
            <div><strong>Controller</strong></div>
            <hr>
            Position:<br>
            x: <span id="controllerX">0.00</span><br>
            y: <span id="controllerY">0.00</span><br>
            z: <span id="controllerZ">0.00</span><br>
        </div>
        <div id="debugPanel">
            <div><strong>Leg0 Joint Debug Info</strong></div>
            <hr>
            <label>
                <input type="checkbox" id="debugToggle" checked> Debug Mode
            </label>
            <hr>
            CoxaJoint:<br>
            <span id="coxaX">0.00</span>,
            <span id="coxaY">0.00</span>,
            <span id="coxaZ">0.00</span><br>
            yaw: <span id="coxaR">0</span>°<br>
            <hr>
            FemurJoint:<br>
            <span id="femurX">0.00</span>,
            <span id="femurY">0.00</span>,
            <span id="femurZ">0.00</span><br>
            roll: <span id="femurR">0</span>°<br>
            <hr>
            TibiaJoint:<br>
            <span id="tibiaX">0.00</span>,
            <span id="tibiaY">0.00</span>,
            <span id="tibiaZ">0.00</span><br>
            roll: <span id="tibiaR">0</span>°<br>
            <hr>
            Foot:<br>
            <span id="footX">0.00</span>,
            <span id="footY">0.00</span>,
            <span id="footZ">0.00</span><br>
        </div>
    </div>
</body>

</html>